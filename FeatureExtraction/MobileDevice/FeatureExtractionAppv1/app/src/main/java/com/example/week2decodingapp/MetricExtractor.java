package com.example.week2decodingapp;

import android.content.Context;
import android.content.pm.PackageManager;
import android.util.Log;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;

public class MetricExtractor {
    private File outputDir;
    private String apkName;

    public MetricExtractor(Context context, String apkName) {
        this.outputDir = context.getFilesDir();
        this.apkName = apkName;
    }

    public void extractApkContents() {
        String apkFilePath = "C:\\Users\\sjind\\ASingh\\RESEARCH_ASSISTANT_MATERIAL\\RAPythonCode\\FeatureExtractionApp\\app\\libs\\apktool.jar";
        System.out.println(outputDir);
        System.out.println(apkName);
    }

    /**
     * Access the contents inside an APK file
     *
     * @param packageName String;
     * @throws PackageManager.NameNotFoundException if package name not found;
     */
    private void extractAPKContentsv2(String packageName) throws PackageManager.NameNotFoundException {
        System.out.println(packageName);
//        try {
//            String apkFilePath = getPackageManager().getApplicationInfo(packageName, 0).sourceDir;
//            Log.d("ApkExtractor", "APK File Path: " + apkFilePath);
//
//            File apkFile = new File(apkFilePath);
//            Log.d("ApkExtractor", "Extracted Parent Directory: " + getFilesDir());
//            File extractDir = new File(getFilesDir(), "extracted"); // Create a directory to extract the APK contents into
//            if (extractDir.mkdir()) {
//                Log.d("ApkExtractor", "Directory Created: ");
//            }
//
//            ZipInputStream zipIs = new ZipInputStream(new FileInputStream(apkFilePath));
//            ZipEntry ze;
//
//            while ((ze = zipIs.getNextEntry()) != null) {
//                String entryName = ze.getName();
//                if (!entryName.startsWith("r/") && !entryName.startsWith("assets/")) {
//                    System.out.println(entryName);
//                }
//            }
//
//            zipIs.close();
//
//        } catch (IOException e) {
//            Log.e("ApkExtractor", "Failed to extract APK contents", e);
//        }
    }
}
