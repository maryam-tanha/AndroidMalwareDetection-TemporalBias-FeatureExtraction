import os
import shutil

# Function to count the number of files in a folder
def count_files_in_folder(folder_path):
    count = 0
    for _, _, files in os.walk(folder_path):
        count += len(files)
    return count


# Function to check if a folder has 5 files
def has_five_files(folder_path):
    return count_files_in_folder(folder_path) == 5


# Function to loop through extracted feature folders for all apps and check if they have 5 files
def check_folders_for_five_files(directory_path):
    count = 0
    folder_list = []
    for root, dirs, _ in os.walk(directory_path):
        for folder in dirs:
            folder_path = os.path.join(root, folder)

            # Prints here if a folder does not have 5 files
            if not has_five_files(folder_path):
                count += 1
                print(f"Folder {folder_path} does not have 5 files.")
                folder_list.append(folder_path)

            # print(count)

    print(f'Total that do not have 5 files: {count}')
    
    for directory in folder_list:
    	try:
    		shutil.rmtree(directory)
    		print("Directory '% s' has been removed successfully" % directory)
    	except OSError as error:
    		print(error)
    		print("Directory '% s' can not be removed" % directory)
    	


if __name__ == '__main__':
    # Path to directory here
    directory_path = 'android_features' # replace with your own path for extracted feature folders

    check_folders_for_five_files(directory_path)

